<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Listado Paginado</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5s/bootstrap.min.css
</head>
<body class="container mt-4">

  <h2>Listado de Documentos</h2>
  <ul id="document-list" class="list-group mb-3"></ul>

  <nav>
    <ul class="pagination" id="pagination"></ul>
  </nav>

  <script>
    const pageSize = 10;
    let currentPage = 1;
    let totalPages = 1;

    async function fetchData(page) {
      const response = await fetch(`https://61yfnkfn3i.execute-api.eu-west-3.amazonaws.com/diagnostics?page=${page}&pageSize=${pageSize}`);
      const result = await response.json();

      console.log(result);

      renderList(result.data);
      renderPagination(result.total);
    }

    function renderList(data) {
      const list = document.getElementById('document-list');
      list.innerHTML = '';
      data.forEach(item => {
        const li = document.createElement('li');
        li.className = 'list-group-item';
        li.textContent = JSON.stringify(item);
        list.appendChild(li);
      });
    }

    function renderPagination(totalItems) {
      totalPages = Math.ceil(totalItems / pageSize);
      const pagination = document.getElementById('pagination');
      pagination.innerHTML = '';

      for (let i = 1; i <= totalPages; i++) {
        const li = document.createElement('li');
        li.className = `page-item ${i === currentPage ? 'active' : ''}`;
        li.innerHTML = `<a class="page-link" href="#">${i}</a>`;
        li.addEventListener('click', (e) => {
          e.preventDefault();
          currentPage = i;
          fetchData(currentPage);
        });
        pagination.appendChild(li);
      }
    }

    // Inicial
    fetchData(currentPage);
  </script>

</body>
</html>
